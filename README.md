# python_bot

Бот предназначен для автоматизации регистрации пользователей и предоставления доступа к курсам в системе LMS Moodle через Telegram.

Основные функции
- Быстрая регистрация и авторизация в системе Moodle новых пользователей.
- Быстрый доступ к курсам

Технологии
- Язык: Python 3.11+
- Библиотеки:
  - Зависимости указаны в файле requirements.txt
- База данных:
  - Xlsx файл с пользователями в облачном хранилище

Установка 
 - pip install -r requirements.txt
 - Создание и заполнение по шаблону example.env env-файла (токены, адреса)
 - Запуск (python main.py)

Как использовать (для пользователя)
 - Все команды можно получить по команде /help или сообщению 'Помощь'
 - При первом запуске бота необходимо зарегистрироваться, используя специальную кнопку, команду /register или сообщение "Регистрация"
 - После регистрации будет доступна кнопка, команда /my_courses и сообщение "Мои курсы" для доступа к курсам
 - После запроса доступа к курсам, бот сообщением выведет ссылки на все доступные вам на данный момент курсы
 - Если пользователю добавлен новый курс, но ссылки нет, необходимо еще раз ввести команду, сообщение или нажать кнопку доступа к курсам
 - При наличии курса необходимо просто перейти по выданной ссылке, войти в аккаунт, используя данные, указаные при регистрации, и можно проходить курс

Как использовать (для администратора)
 - После регистрации пользователя через телеграмм, его данные появятся в файле xlsx в облачном хранилище
 - Для назначения пользователю курсов необходимо в его строке в стобце user_course через запятую без пробелов указать id всех необходимых курсов
 - Для назначения пользователю группы необходимо в его строке в стобце user_group через запятую без пробелов указать id всех необходимых групп


Обновление 1
 -- Промокоды, красота, более структуризированный код
 - Теперь для выдачи доступа к курсам для пользователей, администратор должен в чате написать команду "/create_promo course count", где course - идентификатор курса, а count - количество использований промокода (Старый вариант выдачи курсов до сих пор работает)
 - Теперь для получения доступа к выданному курсу пользователь должен в чате написать команду "/use_promo promo", где promo - промокод, сгенерированный администратором и высланный пользователю (Или же дождаться ручной активации курса)
 - ВАЖНО! Для создания промокода, в env файле в строке ADMINS_TG_ID, должен быть указан tg-айди человека, который будет создававть промокоды 